local Players = game:GetService("Players")
local ReplicatedStorage = game:GetService("ReplicatedStorage")
local GameEvents = ReplicatedStorage:WaitForChild("GameEvents")
local Workspace = game:GetService("Workspace")
local GuiService = game:GetService("GuiService")
local VIM = game:GetService("VirtualInputManager")

if not game:IsLoaded() then game.Loaded:Wait() end

while not Players.LocalPlayer do
	task.wait()
end

local LocalPlayer = Players.LocalPlayer -- üëâ ‡∏¢‡πâ‡∏≤‡∏¢‡∏°‡∏≤‡πÑ‡∏ß‡πâ‡∏´‡∏•‡∏±‡∏á‡∏à‡∏≤‡∏Å Players.LocalPlayer ‡∏û‡∏£‡πâ‡∏≠‡∏°‡πÅ‡∏•‡πâ‡∏ß

game:GetService("Players").LocalPlayer.Idled:Connect(function()
	game:GetService("VirtualUser"):Button2Down(Vector2.new(0, 0), workspace.CurrentCamera.CFrame)
	task.wait(1)
	game:GetService("VirtualUser"):Button2Up(Vector2.new(0, 0), workspace.CurrentCamera.CFrame)
end)

VIM:SendKeyEvent(true, 13, false, game)
task.wait()
VIM:SendKeyEvent(false, 13, false, game)


-- ‡∏£‡∏≠‡πÉ‡∏´‡πâ LocalPlayer ‡∏û‡∏£‡πâ‡∏≠‡∏°
while not Players.LocalPlayer do task.wait() end
local LocalPlayer = Players.LocalPlayer

-- ‡∏£‡∏≠‡πÉ‡∏´‡πâ‡∏ú‡∏π‡πâ‡πÄ‡∏•‡πà‡∏ô‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Ñ‡∏£‡∏ö
local function waitForLoad()
	while not LocalPlayer:GetAttribute("Finished_Loading") do task.wait() end
	while not LocalPlayer:GetAttribute("DataFullyLoaded") do task.wait() end
	while not LocalPlayer:GetAttribute("Setup_Finished") do task.wait() end
	GameEvents.Finish_Loading:FireServer()
	GameEvents.LoadScreenEvent:FireServer(LocalPlayer)
	while not LocalPlayer:GetAttribute("Loading_Screen_Finished") do task.wait() end
	task.wait(1)
end

if not LocalPlayer:GetAttribute("Loading_Screen_Finished") then waitForLoad() end

-- ‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô AFK
LocalPlayer.Idled:Connect(function()
	local vu = game:GetService("VirtualUser")
	vu:Button2Down(Vector2.new(0, 0), Workspace.CurrentCamera.CFrame)
	task.wait(1)
	vu:Button2Up(Vector2.new(0, 0), Workspace.CurrentCamera.CFrame)
end)

-- ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡πÄ‡∏ó‡∏£‡∏î‡∏ú‡∏•‡πÑ‡∏°‡πâ‡∏Å‡∏±‡∏ö‡∏ú‡∏π‡πâ‡πÄ‡∏•‡πà‡∏ô‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î
local function TradeFruitsToAll()
	local NotificationFrame = LocalPlayer.PlayerGui:WaitForChild("Top_Notification").Frame

	while true do
		local allPlayers = Players:GetPlayers()
		local TradedThisRound = {}

		for _, targetPlayer in ipairs(allPlayers) do
			if targetPlayer == LocalPlayer then continue end
			if TradedThisRound[targetPlayer] then continue end
			if not Players:FindFirstChild(targetPlayer.Name) then continue end

			-- ‡∏£‡∏≠ Character ‡πÅ‡∏•‡∏∞ HRP
			local success, TargetChar = pcall(function()
				return targetPlayer.Character or targetPlayer.CharacterAdded:Wait()
			end)
			if not success or not TargetChar then continue end

			local HRP = TargetChar:FindFirstChild("HumanoidRootPart") or TargetChar:WaitForChild("HumanoidRootPart", 5)
			if not HRP then continue end

			local Humanoid = LocalPlayer.Character:FindFirstChild("Humanoid")
			if not Humanoid then continue end

			local traded = false

			for _, tool in ipairs(LocalPlayer.Backpack:GetChildren()) do
				if tool:IsA("Tool") and tool:GetAttribute("b") == "j" then
					Humanoid:UnequipTools()
					task.wait(0.2)
					Humanoid:EquipTool(tool)
					LocalPlayer.Character.HumanoidRootPart.CFrame = HRP.CFrame * CFrame.new(2, 0, 0)
					task.wait(0.5)

					local prompt
					repeat
						task.wait()
						prompt = HRP:FindFirstChild("ProximityPrompt", true)
					until prompt or not targetPlayer or not targetPlayer.Parent

					if prompt then
						fireproximityprompt(prompt, 9e9)
						task.wait(5)
						repeat task.wait() until not NotificationFrame:FindFirstChild("Notification_UI")
						traded = true
						break
					end
				end
			end

			if traded then
				TradedThisRound[targetPlayer] = true
			end
		end

		task.wait(15)
	end
end

-- ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÄ‡∏Ç‡πâ‡∏≤‡πÅ‡∏°‡∏û‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢
if game.PlaceId == 126884695634066 then
	task.spawn(function()
		TradeFruitsToAll()
	end)
end
