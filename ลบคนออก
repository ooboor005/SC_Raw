
-- LocalScript
local Players = game:GetService("Players")
local client = Players.LocalPlayer

local function nukeCharacter(plr)
    if plr ~= client then
        local char = plr.Character
        if char then
            task.defer(function()
                if char and char.Parent then char:Destroy() end
            end)
        end
    end
end

-- เคลียร์คนที่มีอยู่แล้ว
for _, plr in ipairs(Players:GetPlayers()) do
    nukeCharacter(plr)
    plr.CharacterAdded:Connect(function() nukeCharacter(plr) end)
end

-- คนใหม่เข้ามา
Players.PlayerAdded:Connect(function(plr)
    plr.CharacterAdded:Connect(function() nukeCharacter(plr) end)
end)

-- กันกรณีสตรีมโหลดส่วนหนึ่งของตัวละครเข้ามาทีหลัง
workspace.DescendantAdded:Connect(function(d)
    local model = d:FindFirstAncestorOfClass("Model")
    if not model then return end
    local plr = Players:GetPlayerFromCharacter(model)
    if plr and plr ~= client then
        local char = plr.Character
        if char then char:Destroy() end
    end
end)

