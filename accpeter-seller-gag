if not game:IsLoaded() then
	game.Loaded:Wait()
end

local Players = game:GetService("Players")
while not Players.LocalPlayer do
	task.wait()
end

local VIM = game:GetService("VirtualInputManager")
local GuiService = game:GetService("GuiService")
local ReplicatedStorage = game:GetService("ReplicatedStorage")
local LocalPlayer = Players.LocalPlayer

-- ‡∏ï‡∏±‡∏ß‡πÅ‡∏õ‡∏£‡∏´‡∏•‡∏±‡∏Å
local LimitTrade = 1
local Trade = 0
local IsTradeDone = false

-- ‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô‡∏´‡∏•‡∏∏‡∏î
Players.LocalPlayer.Idled:Connect(function()
	local vu = game:GetService("VirtualUser")
	vu:Button2Down(Vector2.new(0, 0), workspace.CurrentCamera.CFrame)
	task.wait(1)
	vu:Button2Up(Vector2.new(0, 0), workspace.CurrentCamera.CFrame)
end)

-- ‡∏Å‡∏î Enter 1 ‡∏Ñ‡∏£‡∏±‡πâ‡∏á (‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô UI ‡∏Ñ‡πâ‡∏≤‡∏á)
VIM:SendKeyEvent(true, 13, false, game)
task.wait()
VIM:SendKeyEvent(false, 13, false, game)

-- ‡∏ü‡∏±‡∏á‡∏ß‡πà‡∏≤ Trade ‡πÄ‡∏™‡∏£‡πá‡∏à
local NotificationFrame = LocalPlayer.PlayerGui:WaitForChild("Top_Notification"):WaitForChild("Frame")
NotificationFrame.ChildAdded:Connect(function(frame)
	if frame:FindFirstChild("TextLabel") and frame.TextLabel.Text == "Trade completed!" then
		IsTradeDone = true
	end
end)

-- ‡∏•‡∏π‡∏õ‡∏£‡∏±‡∏ö‡πÄ‡∏ó‡∏£‡∏î
task.spawn(function()
	while Trade < LimitTrade do
		task.wait(1)

		local giftGui = LocalPlayer.PlayerGui:FindFirstChild("Gift_Notification")
		if giftGui and giftGui:FindFirstChild("Frame") then
			for _, child in pairs(giftGui.Frame:GetChildren()) do
				if child:IsA("ImageLabel") then
					local holder = child:FindFirstChild("Holder")
					local frame = holder and holder:FindFirstChild("Frame")
					local accept = frame and frame:FindFirstChild("Accept")

					if accept then
						IsTradeDone = false

						-- ‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô SelectedObject ‡∏ö‡∏±‡∏Ñ‡∏î‡πâ‡∏ß‡∏¢ pcall
						repeat
							task.wait()
							local success = pcall(function()
								GuiService.SelectedObject = accept
							end)
							if success then
								VIM:SendKeyEvent(true, 13, false, game)
								task.wait()
								VIM:SendKeyEvent(false, 13, false, game)
							else
								warn("‚ö†Ô∏è ‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏ï‡∏±‡πâ‡∏á SelectedObject ‡πÑ‡∏î‡πâ")
							end
							task.wait(0.5)
							GuiService.SelectedObject = nil
						until IsTradeDone

						-- ‡∏Ç‡∏≤‡∏¢ FRUIT
						LocalPlayer.Character.HumanoidRootPart.CFrame = CFrame.new(87, 3, 0)
						task.wait(3)
						local sellEvent = ReplicatedStorage:FindFirstChild("GameEvents") and ReplicatedStorage.GameEvents:FindFirstChild("Sell_Inventory")
						if sellEvent then
							sellEvent:FireServer()
							print("‚úÖ ‡∏Ç‡∏≤‡∏¢ FRUIT ‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à")
						else
							warn("‚ùå ‡πÑ‡∏°‡πà‡∏û‡∏ö Sell_Inventory RemoteEvent")
						end

						Trade += 1
						print("‚úÖ Trade ‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡∏ó‡∏µ‡πà", Trade)
						break -- ‡∏£‡∏±‡∏ö‡πÅ‡∏Ñ‡πà 1 ‡∏ï‡πà‡∏≠‡∏£‡∏≠‡∏ö
					end
				end
			end
		end
	end

	-- ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏Ñ‡∏£‡∏ö Limit ‚Üí ‡∏Å‡∏•‡∏±‡∏ö‡∏à‡∏∏‡∏î‡πÄ‡∏î‡∏¥‡∏°
	task.wait(3)
	LocalPlayer.Character.HumanoidRootPart.CFrame = CFrame.new(115, 3, -12)
	print("üèÅ ‡πÄ‡∏™‡∏£‡πá‡∏à‡∏™‡∏¥‡πâ‡∏ô‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡πÅ‡∏•‡πâ‡∏ß ‡∏Å‡∏•‡∏±‡∏ö‡∏à‡∏∏‡∏î‡πÄ‡∏î‡∏¥‡∏°")
end)
