print('Rut SC')
_G.OPFarmGem = true
script_key="JsDVGPIArtKwIIqTRFdfBkndAWoXcKKI";
loadstring(game:HttpGet("https://api.luarmor.net/files/v3/loaders/5f69c589c2e08aee7d37c351dd3068af.lua"))()

--[[ 
  Idle-trigger Runner (counts idle even while dead)
  - นับเวลานิ่งรวมช่วงที่ตาย/ไม่มี HumanoidRootPart
  - รันโค้ดภายนอกทุก ๆ 60 นาที หากยังนิ่งต่อเนื่อง
  - ไม่รีเซ็ตตัวจับเวลาเมื่อรีสปอน (ถ้ายังไม่ขยับ)
]]--

-- ====== Config ======
local IDLE_THRESHOLD_SECONDS = 60  -- 60 นาที
local CHECK_INTERVAL = 1                 -- ตรวจทุก 1 วินาที
local MOVEMENT_THRESHOLD = 0.1           -- น้อยกว่า 0.1 studs ถือว่านิ่ง

-- ====== Services ======
if not game:IsLoaded() then game.Loaded:Wait() end
local Players = game:GetService("Players")
local RunService = game:GetService("RunService")

-- ====== LocalPlayer ======
while not Players.LocalPlayer do task.wait() end
local LocalPlayer = Players.LocalPlayer

-- ====== State ======
local lastPosition = nil          -- ตำแหน่งล่าสุด (อัปเดตเฉพาะตอนมี HRP)
local lastActiveTick = tick()     -- เวลาล่าสุดที่ "ตรวจพบการขยับ"
local lastRunTick = nil           -- เวลาที่เพิ่งรันสคริปต์ล่าสุด

-- ====== Action: รันโค้ดภายนอก "ตามที่กำหนดไว้" ======
local function startFarmNow()
	print('Rut SC 2')
    _G.OPFarmGem = true
    script_key="JsDVGPIArtKwIIqTRFdfBkndAWoXcKKI";
	loadstring(game:HttpGet("https://api.luarmor.net/files/v3/loaders/5f69c589c2e08aee7d37c351dd3068af.lua"))()
end

-- ====== Idle monitor (นับตอนตายด้วย) ======
local function idleMonitorLoop()
    while RunService:IsRunning() and LocalPlayer and LocalPlayer.Parent do
        task.wait(CHECK_INTERVAL)

        local char = LocalPlayer.Character
        local hrp = char and char:FindFirstChild("HumanoidRootPart")

        -- ถ้ามี HRP ให้วัดการเคลื่อนไหวตามปกติ
        if hrp then
            local currentPos = hrp.Position

            if lastPosition then
                local moved = (currentPos - lastPosition).Magnitude
                if moved >= MOVEMENT_THRESHOLD then
                    lastActiveTick = tick() -- มีการขยับจริง
                end
